{% extends 'base.html' %}
{% block content %}
<div class="text-center">
    <p class="text-slate-900 dark:text-white mt-5 text-2xl">Your score: {{ score }} / {{ questions|length }}</p>
    <p class="text-slate-900 dark:text-white mt-5 text-xl">Percentage of correct answers: {{ score / questions | length * 100 }}%<p>
</div>
<ul class="list-group text-left-aligned">
{% for wrong_answer in wrong_answers %}
    <li class="list-group-item"><p class="text-slate-900 dark:text-white mt-3 text-xl">{{ wrong_answer | safe }}</p></li>
{% endfor %}
</ul>
<br>
<div class="text-center">
    <a class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-200 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-900 font-medium rounded-lg px-5 py-2.5 inline-flex justify-center text-center mt-5" href="{{ url_for('quiz') }}">Retake quiz</a>
</div>
<script>
    // this page is a demo that is not built, so fudge the module.exports support
    // define a global `module` so that the actual source file can use it
    window.module = {};
</script>
<script type="text/javascript" src="{{ url_for('static', filename='js/confetti.js') }}"></script>
<script>
    // define the `module.exports` as the `confetti` global, the way that the
    // cdn distributed file would
    window.confetti = module.exports;
</script>
<script>let duration = 15 * 1000;
    let animationEnd = Date.now() + duration;
    let defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

    function randomInRange(min, max) {
      return Math.random() * (max - min) + min;
    }

    let interval = setInterval(function() {
      let timeLeft = animationEnd - Date.now();

      if (timeLeft <= 0) {
        return clearInterval(interval);
      }

      let particleCount = 50 * (timeLeft / duration);
      // since particles fall down, start a bit higher than random
      confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
      confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
    }, 250);
</script>
{% endblock %}
